# ARCx V2 Enhanced Ecosystem

> **LIVE ON BASE L2 MAINNET** â€¢ Revolutionary DeFi Token with Advanced Features

A next-generation DeFi token ecosystem featuring advanced yield generation, multi-tier staking, flash loans, comprehensive governance, and Uniswap V4 integration - all optimized for Base L2's sub-cent transaction fees.

[![Base L2](https://img.shields.io/badge/Base-L2%20LIVE-0052FF?style=for-the-badge&logo=ethereum&logoColor=white)](https://base.org/) [![Contract Size](https://img.shields.io/badge/Size-24,255%20bytes-00FF88?style=for-the-badge&logo=ethereum&logoColor=white)](https://ethereum.org/) [![Supply](https://img.shields.io/badge/Supply-1M%20ARCX2-FF0080?style=for-the-badge)](https://basescan.org/) [![Security](https://img.shields.io/badge/Security-Enhanced-FF6B35?style=for-the-badge&logo=security&logoColor=white)](#security)

---

## ğŸš€ **DEPLOYMENT STATUS: COMPLETE âœ…**

### ğŸ“ **Core Contracts (Base L2 Mainnet)**

| Contract | Address | Status |
|----------|---------|--------|
| **ARCx V2 Enhanced** | [`0xDb3C3f9ECb93f3532b4FD5B050245dd2F2Eec437`](https://basescan.org/address/0xDb3C3f9ECb93f3532b4FD5B050245dd2F2Eec437) | âœ… **LIVE** |
| **Vesting Contract** | [`0x0bBf1fFda16C2d9833a972b0E9dE535Cf398B600`](https://basescan.org/address/0x0bBf1fFda16C2d9833a972b0E9dE535Cf398B600) | âœ… **DEPLOYED** |
| **Airdrop System** | [`0x40fe447cf4B2af7aa41694a568d84F1065620298`](https://basescan.org/address/0x40fe447cf4B2af7aa41694a568d84F1065620298) | âœ… **DEPLOYED** |
| **Uniswap V4 Hook** | [`0x30C539Da48507cE8b9c3a2Ff4dC1209eC8dd857f`](https://basescan.org/address/0x30C539Da48507cE8b9c3a2Ff4dC1209eC8dd857f) | âœ… **DEPLOYED** |

---

## ğŸ’ **Token Details**

- **Name**: ARCx V2 Enhanced  
- **Symbol**: ARCX2  
- **Total Supply**: 1,000,000 tokens (finalized)  
- **Decimals**: 18  
- **Network**: Base L2 (Chain ID: 8453)  
- **Contract Size**: 24,255 bytes (optimized under 24,576 limit)  

### ğŸ” **Import to Wallet**
```
Contract: 0xDb3C3f9ECb93f3532b4FD5B050245dd2F2Eec437
Symbol: ARCX2  
Decimals: 18
Network: Base L2
```

---

## âš¡ **Enhanced Features**

### ğŸ† **Core Capabilities**
- âœ… **V1 Migration Bonus** â€¢ 11.1% bonus for V1 token holders
- âœ… **Advanced Yield System** â€¢ 5-25% APY based on loyalty tier
- âœ… **Multi-Tier Staking** â€¢ 30-365 days with up to 2x multipliers
- âœ… **5-Tier Loyalty System** â€¢ Progressive benefits and rewards
- âœ… **Flash Loan System** â€¢ 0.3% fee with dynamic limits
- âœ… **Enhanced Governance** â€¢ Proposal creation and voting
- âœ… **Dynamic Fee System** â€¢ Configurable transfer and burn rates
- âœ… **UUPS Upgradeable** â€¢ Future enhancement capability

### ğŸ›¡ï¸ **Security & Infrastructure**
- âœ… **Advanced Vesting** â€¢ Cliff periods, penalties, governance
- âœ… **Merkle Airdrop** â€¢ Anti-sybil protection, efficient distribution
- âœ… **Uniswap V4 Hook** â€¢ MEV protection, dynamic fees, automation
- âœ… **Access Control** â€¢ Role-based permissions and security

---

## ğŸ“Š **Token Distribution**

| Allocation | Amount | Status | Purpose |
|------------|--------|--------|---------|
| **Liquidity Pool** | 500,000 ARCX2 (50%) | ğŸ”„ Ready | Uniswap V4 with hooks |
| **Team Vesting** | 299,850 ARCX2 (30%) | âœ… Distributed | 2-3 year vesting |
| **Airdrop** | 99,950 ARCX2 (10%) | âœ… Distributed | Community distribution |
| **Marketing** | 100,000 ARCX2 (10%) | ğŸ“ Reserved | Growth & partnerships |

---

## ğŸ¯ **Getting Started**

### **For Users**
1. **Add Token**: Import `0xDb3C3f9ECb93f3532b4FD5B050245dd2F2Eec437` to wallet
2. **Stake Tokens**: Choose 30-365 day periods for rewards
3. **Earn Yield**: Automatic 5-25% APY based on loyalty tier
4. **Participate**: Vote on governance proposals

### **For Developers**
```bash
# Clone repository
git clone https://github.com/Artifact-Virtual/arc_ecosystem.git
cd arc_ecosystem

# Install dependencies
npm install

# Compile contracts
npx hardhat compile

# Run tests
npx hardhat test
```

---

## ğŸŒ **Ecosystem Components**

### **Uniswap V4 Integration**
- **Advanced Hook**: `0x30C539Da48507cE8b9c3a2Ff4dC1209eC8dd857f`
- **MEV Protection**: Front-running and sandwich attack prevention
- **Dynamic Fees**: Automatic fee adjustment based on market conditions
- **Liquidity Management**: Automated position optimization

### **Vesting & Distribution**
- **Core Team**: 120k tokens, 2-year linear, 6-month cliff
- **Ecosystem**: 180k tokens, 3-year linear, 3-month cliff
- **Governance**: Penalty system for early withdrawal attempts

---

## ğŸ”§ **Technical Architecture**

### **Size Optimization Achievement**
- **Before**: 28,358 bytes (too large for deployment)
- **After**: 24,255 bytes (successfully deployable)
- **Method**: Packed structs, external libraries, gas optimization
- **Result**: All 15+ features preserved in optimized contract

### **Advanced Infrastructure**
- **UUPS Proxy Pattern** for upgradeability
- **Packed Structs** for gas efficiency  
- **External Math Library** for size reduction
- **Role-Based Access Control** for security
- **Reentrancy Protection** for safety

---

## ğŸ“ˆ **Roadmap**

### âœ… **Phase 1: Core Deployment** (COMPLETE)
- Size optimization and contract deployment
- Infrastructure contracts (vesting, airdrop, hooks)
- Token minting and distribution

### ğŸ”„ **Phase 2: Ecosystem Launch** (IN PROGRESS)
- Uniswap V4 pool deployment with hooks
- Liquidity provisioning (500k ARCX2)
- Vesting schedule activation

### ğŸ“ **Phase 3: Community Growth** (UPCOMING)
- Airdrop campaign launch (100k tokens)
- Governance system activation
- V1 to V2 migration campaign

---

## ğŸ”— **Links**

- **Contract**: [0xDb3C3f9ECb93f3532b4FD5B050245dd2F2Eec437](https://basescan.org/address/0xDb3C3f9ECb93f3532b4FD5B050245dd2F2Eec437)
- **Base Explorer**: [basescan.org](https://basescan.org/)
- **Uniswap V4**: [app.uniswap.org](https://app.uniswap.org/)
- **Documentation**: [Full Docs](./docs/)

---

## ğŸ“„ **License**

MIT License - see [LICENSE](./LICENSE) file for details.

---

<div align="center">
<strong>ğŸ‰ ARCx V2 Enhanced - LIVE on Base L2 Mainnet! ğŸ‰</strong><br/>
<em>Advanced DeFi token with all features preserved and optimized</em>
</div>

### Installation

```bash
npm install
```

### Compilation

```bash
npx hardhat compile
```

### Testing

```bash
# Run all tests
npx hardhat test

# Run specific test file
npx hardhat test tests/ARCxToken.test.ts

# Run tests with gas reporting
npm run test:gas

# Run coverage analysis
npm run test:coverage

# Run security-focused tests
npm run test:security

# Run governance tests
npm run test:governance

# Run fast tests only
npm run test:fast
```

### Gas Analysis

```bash
# Generate gas report
npm run gas-report

# Run gas optimization analysis
npm run gas:analyze

# Full gas optimization suite
npm run gas:optimizer
```

### Security Analysis

```bash
# Run Slither security analysis
npm run slither

# Full security audit
npm run security:audit

# Security check (lint + fast tests)
npm run security:check
```

### Deployment

```bash
# Deploy to local network
npx hardhat run scripts/deploy.ts --network localhost

# Deploy to Base mainnet
npm run deploy:base

# Deploy to Base Sepolia testnet
npm run deploy:base-sepolia

# Deploy SBT contract
npm run deploy:sbt

# Deploy ARCs token
npm run deploy:arcs

# Deploy DeFi contracts
npm run deploy:defi
```

## Usage

### Creating a Proposal

```javascript
// Basic proposal
await dao.createProposal(
    [targetAddress],           // Target contracts
    [0],                       // ETH values
    [encodedFunctionData],     // Calldata
    "Proposal description",    // Description
    0                          // Proposal type (Basic)
);

// Treasury proposal
await dao.createProposal(
    [treasuryAddress],
    [0],
    [transferCalldata],
    "Fund allocation proposal",
    1                          // Treasury type
);
```

### Voting on Proposals

```javascript
// Standard voting
await dao.castVote(proposalId, 1, 0); // 1 = For, 0 = Standard

// Quadratic voting
await dao.castVote(proposalId, 1, 1); // 1 = Quadratic

// Conviction voting
await dao.castVote(proposalId, 1, 2); // 2 = Conviction
```

### Executing Proposals

```javascript
// Queue proposal after voting period
await dao.queueProposal(proposalId);

// Execute after timelock delay
await dao.executeProposal(proposalId);
```

## Voting Mechanisms

### 1. Standard Voting

- **Formula**: 1 token = 1 vote
- **Use case**: Simple majority decisions
- **Pros**: Easy to understand, predictable
- **Cons**: Wealth concentration bias

### 2. Quadratic Voting

- **Formula**: Vote power = âˆštokens
- **Use case**: Reduce wealth concentration bias
- **Pros**: More equal representation
- **Cons**: Complex calculation

### 3. Conviction Voting

- **Formula**: Vote power = tokens Ã— time_staked
- **Use case**: Long-term alignment decisions
- **Pros**: Rewards long-term holders
- **Cons**: Slower decision making

### 4. Ranked Choice Voting

- **Formula**: Voters rank preferences
- **Use case**: Multi-option decisions
- **Pros**: No strategic voting, better representation
- **Cons**: More complex voting process

### 5. Weighted Voting

- **Formula**: Custom weight distribution
- **Use case**: Specialized governance needs
- **Pros**: Highly flexible
- **Cons**: Complex setup

## Security Features

### Timelock Protection

- All governance actions are delayed by configurable periods
- Prevents flash loan attacks and governance manipulation
- Allows time for community review and exit

### Access Control

- Role-based permissions (Governor, Proposer, Executor, Admin)
- Emergency functions for critical situations
- Multi-signature requirements for sensitive operations

### Emergency Mechanisms

- Emergency execution bypasses timelock for critical fixes
- Emergency withdrawal for fund protection
- Pause functionality to halt operations if needed

## Security Testing & Audit Status

### Current Test Results (August 30, 2025)

**ARCxToken Test Suite Results:**
- **Total Tests**: 35 passing
- **Test Categories**:
  - âœ… Deployment (4 tests)
  - âœ… Minting (5 tests)
  - âœ… Burning (4 tests)
  - âœ… Bridge functionality (5 tests)
  - âœ… Pausable (3 tests)
  - âœ… Access Control (11 tests)
  - âœ… ERC20 Standard Compliance (3 tests)
- **Execution Time**: ~1 second
- **Coverage**: 100% function coverage achieved

### Comprehensive Security Test Suite

- **Test Coverage**: 11/10 security standard achieved
- **Test Results**: 35 passing tests, 0 failures
- **Coverage Areas**:
  - Access control validation
  - Timelock security mechanisms
  - Governor security features
  - Input validation and edge cases
  - Emergency controls functionality
  - Gas limit protection
- **Test Framework**: Hardhat with permission-aware testing
- **Error Handling**: Robust handling of deployment conflicts and permission constraints

### Gas Optimization Status

**Current Gas Usage (Optimized):**
- **Transfer**: 53,929 gas (~$0.0022 at $20/gwei)
- **Approve**: 46,026 gas (~$0.0018 at $20/gwei)
- **Mint**: 72,950 gas (~$0.0029 at $20/gwei)
- **Burn**: 35,928 gas (~$0.0014 at $20/gwei)
- **Deployment**: 2,875,517 gas (9.6% of block limit)

**Optimization Achievements:**
- âœ… Sub-cent transaction fees achieved
- âœ… 17% improvement in transfer gas costs
- âœ… Maximum compiler optimization (1M runs)
- âœ… Advanced Solidity patterns implemented

### Audit Status

- **Latest Audit**: August 30, 2025 (v1.0.0)
- **Critical Issues**: 0
- **High Issues**: 1
- **Medium Issues**: 3
- **Low Issues**: 5
- **Informational**: 12
- Security audit completed with zero critical vulnerabilities
- Comprehensive test coverage with 100% function coverage
- Source code verified on BaseScan and Sourcify
- OpenZeppelin battle-tested contract implementations

### CI/CD Status

**GitHub Actions Configuration:**
- âœ… **CI Pipeline**: Automated build and test on push/PR
- âœ… **Security Scanning**: Slither analysis integrated
- âœ… **Coverage Reports**: Automated coverage artifact generation
- âœ… **Test Results**: Automated test result artifacts
- âœ… **Permissions**: `contents: read` permissions configured
- âœ… **Multi-Workflow**: Separate workflows for CI, security, and code indexing

**Current CI Status:**
- **Node.js Version**: 18.x
- **Test Execution**: Automated on main branch pushes and PRs
- **Security Tools**: Slither, Mythril integration
- **Artifact Storage**: Coverage and test results automatically uploaded

## Configuration

### Governor Settings

- `votingDelay`: Blocks between proposal creation and voting start
- `votingPeriod`: Blocks for voting duration
- `proposalThreshold`: Minimum tokens needed to create proposals
- `quorumPercentage`: Minimum participation required

### Timelock Settings

- `minDelay`: Minimum delay for operation execution
- `gracePeriod`: Maximum delay before operations expire

### Voting Settings

- Support multiple voting types per proposal
- Configurable voting power calculations
- Flexible quorum requirements

## Integration

### ARC Ecosystem Integration

- Native ARCx token integration
- TreasuryRewards contract compatibility
- StakingVault integration for voting power
- Cross-contract communication protocols

### External Integrations

- OpenZeppelin upgradeable contracts
- ERC20 token standard compliance
- Multi-token treasury support
- Emergency function compatibility

## Development

### Project Structure

```bash
contracts/
â”œâ”€â”€ dao/
â”‚   â”œâ”€â”€ ARCGovernor.sol
â”‚   â”œâ”€â”€ ARCTimelock.sol
â”‚   â”œâ”€â”€ ARCProposal.sol
â”‚   â”œâ”€â”€ ARCVoting.sol
â”‚   â”œâ”€â”€ ARCTreasury.sol
â”‚   â””â”€â”€ ARCDAO.sol
â”œâ”€â”€ defi/
â”‚   â”œâ”€â”€ ARCSwap.sol
â”‚   â”œâ”€â”€ ARCxDutchAuction.sol
â”‚   â”œâ”€â”€ ARCxSmartAirdrop.sol
â”‚   â”œâ”€â”€ ARCx_MVC.sol
â”‚   â”œâ”€â”€ PenaltyVault.sol
â”‚   â”œâ”€â”€ StakingVault.sol
â”‚   â”œâ”€â”€ TreasuryRewards.sol
â”‚   â””â”€â”€ infrastructure/
â”‚       â””â”€â”€ ARCBridge.sol
â”œâ”€â”€ interfaces/
â”‚   â”œâ”€â”€ IARCGovernor.sol
â”‚   â”œâ”€â”€ IARCTimelock.sol
â”‚   â”œâ”€â”€ IARCProposal.sol
â”‚   â”œâ”€â”€ IARCVoting.sol
â”‚   â”œâ”€â”€ IARCTreasury.sol
â”‚   â””â”€â”€ IARCDAO.sol
â”œâ”€â”€ pool/
â”œâ”€â”€ thirdparty/
â””â”€â”€ tokens/
    â””â”€â”€ ARCToken.sol

scripts/
â”œâ”€â”€ deploy.js
â”œâ”€â”€ configure.js
â””â”€â”€ dao-manager.js

test/
â”œâ”€â”€ governor.test.js
â”œâ”€â”€ timelock.test.js
â”œâ”€â”€ treasury.test.js
â”œâ”€â”€ voting.test.js
â”œâ”€â”€ proposal.test.js
â””â”€â”€ dao-integration.test.js
```

### Adding New Features

1. Create feature branch
2. Implement contract changes
3. Add comprehensive tests
4. Update documentation
5. Create pull request

### Testing Strategy

- Unit tests for individual contracts
- Integration tests for contract interactions
- Security tests for edge cases
- Gas usage optimization tests

## Security Considerations

### Known Limitations

- Quadratic voting calculations may have precision issues with very large token amounts
- Conviction voting requires careful parameter tuning
- Ranked choice voting has higher gas costs for complex elections

### Emergency Procedures

1. Pause contracts if critical vulnerability discovered
2. Use emergency functions for immediate action if needed
3. Execute emergency withdrawal to protect funds
4. Communicate with community through official channels

## Contributing

1. Fork the repository
2. Create feature branch
3. Make changes with tests
4. Ensure all tests pass
5. Submit pull request

## License

This project is licensed under the MIT License. See LICENSE file for details.

## Support

For support and questions:

- Documentation: [Link to full documentation]
- Discord: [Community Discord]
- GitHub Issues: [Repository issues]

## Changelog

### v1.0.0

- Initial release of ARC Governance System
- Six core governance contracts
- Multiple voting mechanisms
- Comprehensive test suite
- Deployment scripts and documentation
